# 1. Базовий образ (Node.js)
FROM node:20

# 2. Робоча директорія всередині контейнера
WORKDIR /app

# 3. Спочатку копіюємо package.json для швидкого кешування
COPY package*.json ./

# 4. Встановлюємо залежності
RUN npm install

# 5. Копіюємо ВСІ файли проєкту
COPY . .

# 6. Відкриваємо порт контейнера
EXPOSE 3000

# 7. Команда запуску сервера
CMD ["node", "index.js", "-H", "0.0.0.0", "-P", "3000", "-C", "./cache"]
